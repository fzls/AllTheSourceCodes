import java.awt.*;
import java.awt.event.*;

import javax.swing.*;

import java.io.BufferedReader;  
import java.io.File;  
import java.io.FileInputStream;  
import java.io.InputStreamReader;  


public class Login extends JFrame implements ActionListener {
	JLabel label1,label2,label3,label4;
	JTextField text1;
	JPasswordField text2;
	JButton button1,button2;
	//JRadioButton radiobutton1,radiobutton2;
	ButtonGroup group;
	Box baseBox,box1,box2;
	Student student;
	
	
    public Login(String s) {
    	super(s);
	setBounds(350,100,440,530);
	setVisible(true);
	Toolkit tool=this.getToolkit();
	Image image=tool.getImage("src//浙大.png");
	this.setIconImage(image);
    setLayout(new FlowLayout());
    Icon icon=new ImageIcon("src//浙大.png");
    label1=new JLabel(icon);
	label2=new JLabel("用户名");
	label3=new JLabel("密    码");
	label4=new JLabel("欢迎登陆教学数据库系统",JLabel.CENTER);
	button1=new JButton("登录");
	button2=new JButton("退出");
	text1=new JTextField(8);
	text2=new JPasswordField(8);
	text2.setEchoChar('*');
	group=new ButtonGroup();
	box1=Box.createVerticalBox();
	box1.add(label2);
	box1.add(Box.createVerticalStrut(8));
	box1.add(label3);
	box2=Box.createVerticalBox();
	box2.add(text1);
	box2.add(Box.createVerticalStrut(8));
	box2.add(text2);
	baseBox=Box.createHorizontalBox();
	baseBox.add(box1);
    baseBox.add(Box.createHorizontalStrut(10));
    baseBox.add(box2);
    add(baseBox);
    add(button1);
    add(button2);
	add(label4);
	add(label1);
	button1.addActionListener(this);
	button2.addActionListener(this);
	validate();
	setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
	
	/*radiobutton1=new JRadioButton("学生");
	radiobutton2=new JRadioButton("教师");
	group.add(radiobutton1);
	group.add(radiobutton2);
	add(radiobutton1);
    add(radiobutton2);*/
    }
    
   
    @SuppressWarnings("deprecation")
	public void actionPerformed(ActionEvent e){
    	if(e.getSource()==button2)
		{
			System.exit(0);
		}
    	String filePath = "f:\\log.txt";  
    	boolean flag=false;
		if(e.getSource()==button1)
		{  
			 try {  
	                String encoding="GBK";  
	                File file=new File(filePath);  
	                if(file.isFile() && file.exists()){ //判断文件是否存在  
	                    InputStreamReader read = new InputStreamReader(  
	                    new FileInputStream(file),encoding);//考虑到编码格式  
	                    BufferedReader bufferedReader = new BufferedReader(read);  
	                    String lineTxt = null;  
	                    while((lineTxt = bufferedReader.readLine()) != null){  
	                    	String a[]=lineTxt.split(" ");
	                    	if(text1.getText().equals(a[0])&&text2.getText().equals(a[1]))
	            			{
	                    		student=new Student("学生信息查询");
	                    		student.setVisible(true);
	                    		setVisible(false);                  	
	            			    flag=true;
	            			    break;
	            		    }
	                    }  	                
	                    read.close();  
	                }else{  
	                    System.out.println("找不到指定的文件");  
	                }  
	                } catch (Exception e1) {  
	                    System.out.println("读取文件内容出错");  
	                    e1.printStackTrace();  
	                }   
			 if(flag==false){
     			label4.setForeground(Color.red);
     			label4.setText("登陆有误，请重试");     	  
     		}	      
	    }  
   
    }
   
}